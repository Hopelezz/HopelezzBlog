---
export async function getBlogPosts(){
    // Data Fetching: List all Markdown Blog posts in the repo.
    let allBlogPosts = await Astro.glob('../pages/blog/*.md');
    // sorts the blog posts by publishedDate
    allBlogPosts = allBlogPosts.sort((a, b) => new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf());
    //used for the Leftside bar most recent buttons
    let mostRecentBlogPost = allBlogPosts[0];

    return { allBlogPosts, mostRecentBlogPost }
}

export async function getBookPosts(){    
    // Data Fetching: List all Markdown Book posts in the repo.
    let allBookPosts = await Astro.glob('../pages/book/*.md');
    // sorts the book posts by publishedDate
    allBookPosts = allBookPosts.sort((a, b) => new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf());
    //used for the Leftside bar most recent buttons
    let mostRecentBookPost = allBookPosts[0];

    return { allBookPosts, mostRecentBookPost }
}

//an export async function that returns an array of all posts. concat all the blog posts and book posts.
export async function getPosts(){ 
    let blogPosts = await getBlogPosts();
    let bookPosts = await getBookPosts();
    let allPosts = blogPosts.allBlogPosts.concat(bookPosts.allBookPosts);

    return { allPosts };
}
---
