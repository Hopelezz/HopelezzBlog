---
layout: ../../layouts/BlogPost.astro
title: Searchbar Using Solidjs
publishDate: 26 AUG 2022
writer: Mark
description: How to use the solidjs to create a searchbar
img: /assets/blog/Solid_logo.svg
alt: 
tags: A New Start
draft: true
---

When I think of navigation I don't really think about links, buttons, or even dropdown menus. My first thoughts are of a searchbar. Using keywords to find relavent information instead of scouring for it. Not sure if this comes from my early days on the internet and the means of discovery one could have by typing random words. Currently none of Astros example templates have a search feature built into them. Lets set out fixing this for our blog.

# The First Steps

For this feature I've chosen Solid-JS. This is a framework built on the premise of being `reactive`. Oh, but what is reactivity you say? Instead of refreshing the page and redownloading the the content again, solidjs will granularly update the main component. Essentially, when we trigger an event this will cause only the component to refresh.

## The Breakdown

We need to define some core primatives of our component. I want to make it so that when I type into search it will imediately return the results in a list. Narrowing the search the more accurate the query becomes.

# Setting Up The Envioroment

Because we're using Astro, we need to integreate Solid-js into our astro configuration file. The steps below can be found more in detail in the [Astro Docs](https://docs.astro.build/en/guides/integrations-guide/solid-js/).

First step is to install Solid via the terminal.

```
npm run astro add solid
```

Next we will want to set up our astro config file so that way we can integrate solid into Astro.

```js title="astro.config.mjs"
import solid from '@astrojs/solid-js';

export default {
  // ...
  integrations: [solid()],
}
```

Now that we have our config file setup. Lets create a new component! I'm going to create a new component in the `components` directory. Inside of this folder we will create a tsx and a .css file.

```
src
├───components
│   ├───blog
│   └───search          <-- component folder
│       ├───search.tsx  <-- component
│       └───search.css  <-- style
├───layouts
├───pages
│   └───blog
└───styles
```

Inside of our search.tsx file we will want to set up the import statement along with some functions we'll need from the Solid-js API.

```tsx title="Search.tsx"
/** @jsxImportSource solid-js */  <-- import statement

import { createSignal, For, Show } from "solid-js";
```
<br/>
### Solid API Properties: 

- "The createSignal tracks a single value (which can be any JavaScript object) that changes over time."
    - The createSignal function returns a pair of functions as a two-element array: a getter (or accessor) and a setter. In typical use, you would destructure this array into a named Signal. 
- "The FOR is a referentially keyed loop with efficient updating of only changed items."
    - This is an HTML element that is used to iterate over an array of items.
- "The SHOW is a conditional rendering that only renders the content when the condition is true."
    - This is an HTML element that is used to conditionally render content.

<br/>

We will start by defining our properties of the page frontmatter. Next we will be supplying the Search component with an array of posts. We want to check this array for keywords pertaining to these posts. We can do this by using the  Title, Description, and Tags properties.

Currently my structure looks something like the following script shows. You will have to define this based on how you have yours setup.

```tsx title="Search.tsx"
interface Props {
  posts: Array<{
        title: string;
        author: string;
        writer: string;
        description: string;
        tags: string;
        url: string;
  }>;
}
``` 

By the definition of API functions from solid we can use the For and Show components to iterate over the posts array and check if the keywords are in the title, description, or tags. We will need to set up a filtering system to compare the input to the existing list.

To start with we need to set up a function that takes in the array of posts. 

```tsx title="Search.tsx"
export default function Search(props: Props) {
  ...//our component will exist here.
}
```

Next we will define a getter and a setter in accoradance to the documentation. It is standard practice to name these functions `name` and `setName`. For our purpose we will call this search and setSearch. We will also want to setup a filteredPosts array to hold the posts that match our search. This will be initialized from an internal function.

```tsx
  const [search, setSearch] = createSignal(""); //create a signal for the search input
  const [filteredPosts, setFilteredPosts] = createSignal(props.posts); //Initialize with all posts

  function handleInput(e: any) {
    const { value } = e.currentTarget;  //get the value of the input
    setSearch(value.toLowerCase()); //set the search signal to the value of the input
    const fPosts = props.posts.filter(post => { //filter the posts
      const { title, description, tags, author } = post;  //get the frontmatter of the post
      return (
        title?.toLowerCase().includes(value) ||
        description?.toLowerCase().includes(value) ||
        author?.toLowerCase().includes(value) ||
        tags?.toLowerCase().includes(value)
      )
    });

    setFilteredPosts(fPosts) //set the filtered posts signal to the filtered posts
  }
```


